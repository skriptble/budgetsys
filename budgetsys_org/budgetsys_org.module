<?php

/**
 * @file
 * Organization module for the Budget System.
 */

/**
 * Implements hook_entity_info().
 */
function budgetsys_org_entity_info() {
    $return = array(
    'budgetsys_org' => array(
      'label' => t('Budget System Organization'),
      'plural label' => t('Budget System Organizations'),
      'description' => t('An entity type for organizations which group line items.'),
      'entity class' => 'BudgetsysOrgClass',
      'controller class' => 'BudgetsysOrgClassController',
      'base table' => 'budgetsys_org',
      'fieldable' => TRUE,
      'entity keys' => array(
        'id' => 'oid',
      ),
      // Make use the class' label() and uri() implementation by default.
      'label callback' => 'entity_class_label',
      'uri callback' => 'entity_class_uri',
      'module' => 'budgetsys_org',
    ),
    );
  return $return;
}

/**
 * Implements hook_menu()
 */
function budgetsys_org_menu() {
  $items = array();
  $items['budget/org/add'] = array(
    'title' => 'Add new organization',
    'page callback' => 'budgetsys_org_add',
    'access arguments' => array('create budget system organizations'),
    'weight' => 2,
    'menu_name' => 'management',
    'file' => 'budgetsys_org.pages.inc',
  );
  return $items;
}



/**
 * Returns an initialized artwork object.
 *
 * @param $type
 *   The machine-readable type of the artwork.
 *
 * @return
 *   An artwork object with all default fields initialized.
 */
function budgetsys_org_new($type = '') {
  return entity_get_controller('budgetsys_org')->create();
}

function budgetsys_org_save($budget_org) {
  return entity_get_controller('budgetsys_org')->save($budget_org);
}

function budgetsys_org_load_multiple($oids = array(), $conditions = array(), $reset = FALSE) {
    return entity_load('budgetsys_org', $oids, $conditions, $reset);
}

function budgetsys_org_load($bvid = NULL, $vid = NULL, $reset = FALSE) {
    $oids = (isset($oid) ? array($oid) : array());
    $conditions = (isset($vid) ? array('vid' => $vid) : array());
    $budget_org = budgetsys_org_load_multiple($oids, $conditions, $reset);
    return $budget_org ? reset($budget_org) : FALSE;
}